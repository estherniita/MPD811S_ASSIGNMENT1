(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"74mu":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return c});const s=(t,e)=>null!==e.closest(t),i=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,[`ion-color-${t}`]:!0},e):e,r=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},o=/^[a-z][a-z0-9+\-.]*:/,c=async(t,e,n,s)=>{if(null!=t&&"#"!==t[0]&&!o.test(t)){const i=document.querySelector("ion-router");if(i)return null!=e&&e.preventDefault(),i.push(t,n,s)}return!1}},acej:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var s=n("1vRN");const i=async(t,e,n,i,r)=>{if(t)return t.attachViewToDom(e,n,r,i);if("string"!=typeof n&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const o="string"==typeof n?e.ownerDocument&&e.ownerDocument.createElement(n):n;return i&&i.forEach(t=>o.classList.add(t)),r&&Object.assign(o,r),e.appendChild(o),await new Promise(t=>Object(s.c)(o,t)),o},r=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},"c/rV":function(t,e,n){"use strict";n.d(e,"a",function(){return g});var s=n("7o/Q");function i(t=-1){return e=>e.lift(new r(t,e))}class r{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new o(t,this.count,this.source))}}class o extends s.a{constructor(t,e,n){super(t),this.count=e,this.source=n}error(t){if(!this.isStopped){const{source:e,count:n}=this;if(0===n)return super.error(t);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}}}var c=n("lJxs"),a=(n("gcOT"),n("5x/H"),n("6nsN"),n("WI49"),n("fXoL")),u=n("I/3d"),l=n("Vaw3"),d=n("TEn/"),h=n("lGQG");let g=(()=>{class t{constructor(t,e,n,s,i,r,o){this.aFirestore=t,this.afStorage=e,this.toastCtrl=n,this.loadingCtrl=s,this.alertCtrl=i,this.authService=r,this.navCtrl=o,this.userCollection=this.aFirestore.collection("users"),this.requestsCollection=this.aFirestore.collection("requests")}getOrdersByShopId(t){return this.aFirestore.collection("orders",e=>e.where("shopId","==",t)).valueChanges()}getOrdersByUserId(t){return this.aFirestore.collection("orders",e=>e.where("shopId","==",t)).valueChanges()}getUserData(t){return this.userCollection.doc(t).valueChanges()}getUsers(){return this.userCollection.snapshotChanges().pipe(i(3),Object(c.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}getRequests(){return this.requestsCollection.snapshotChanges().pipe(i(3),Object(c.a)(t=>t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})))}addRequest(t){return this.requestsCollection.add(t)}saveRequest(t){return this.userCollection.doc(t.uid).collection("requests").add(t.data)}deleteRequest(t){return this.userCollection.doc(t.uid).collection("requests").doc(t.reqId).delete()}}return t.\u0275fac=function(e){return new(e||t)(a.Ub(u.a),a.Ub(l.a),a.Ub(d.C),a.Ub(d.x),a.Ub(d.b),a.Ub(h.a),a.Ub(d.y))},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},h3R7:function(t,e,n){"use strict";n.d(e,"a",function(){return s});const s={bubbles:{dur:1e3,circles:9,fn:(t,e,n)=>{const s=t*e/n-t+"ms",i=2*Math.PI*e/n;return{r:5,style:{top:9*Math.sin(i)+"px",left:9*Math.cos(i)+"px","animation-delay":s}}}},circles:{dur:1e3,circles:8,fn:(t,e,n)=>{const s=e/n,i=t*s-t+"ms",r=2*Math.PI*s;return{r:5,style:{top:9*Math.sin(r)+"px",left:9*Math.cos(r)+"px","animation-delay":i}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,n)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/n-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,n)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/n-t+"ms"}})}}},lGQG:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var s=n("mrSG"),i=n("gcOT"),r=(n("5x/H"),n("6nsN"),n("fXoL")),o=n("tyNb"),c=n("UbJi"),a=n("TEn/"),u=n("I/3d");const{Storage:l}=i.b;let d=(()=>{class t{constructor(t,e,n,s,i,r){this.router=t,this.auth=e,this.loadingCtrl=n,this.alertCtrl=s,this.afs=i,this.navCtrl=r,this.userCollection=this.afs.collection("users")}isLoggedIn(){return Object(s.b)(this,void 0,void 0,function*(){const t=yield l.get({key:"user"});return!1!==JSON.parse(t.value).user.loggedIn})}getUserData(t){return this.userCollection.doc(t).valueChanges()}login(t,e){return Object(s.b)(this,void 0,void 0,function*(){const n=yield this.loadingCtrl.create({message:"Authenticating",spinner:"dots"});yield n.present(),yield this.auth.signInWithEmailAndPassword(t,e).then(t=>Object(s.b)(this,void 0,void 0,function*(){this.getUserData(t.user.uid).subscribe(e=>Object(s.b)(this,void 0,void 0,function*(){console.log(e),yield l.set({key:"user",value:JSON.stringify({loggedIn:!0,uid:t.user.uid,user:e})}).then(()=>{n.dismiss(),this.navCtrl.navigateRoot("/home")})}))})).catch(t=>Object(s.b)(this,void 0,void 0,function*(){switch(t.code){case"auth/wrong-password":this.loadingCtrl.dismiss(),this.showAlert("You have entered a wrong password, enter the correct password");break;case"auth/user-not-found":{this.loadingCtrl.dismiss();const t=yield this.alertCtrl.create({message:"No account was found corresponsing to the email you entered",buttons:[{text:"Re-enter email",role:"cancel"},{text:"Signup",handler:()=>{this.router.navigate(["/signup"])}}]});return t.backdropDismiss=!1,yield t.present()}}}))})}showAlert(t){return Object(s.b)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({message:t,buttons:["ok"]});yield e.present()})}showAlertNav(t){return Object(s.b)(this,void 0,void 0,function*(){const e=yield this.alertCtrl.create({message:t,buttons:[{text:"Okay",handler:()=>{this.navCtrl.navigateRoot(["/login"])}}]});yield e.present()})}showLoading(){return Object(s.b)(this,void 0,void 0,function*(){let t=yield this.loadingCtrl.create({message:"Processing request...",duration:3e3,spinner:"crescent"});yield t.present()})}signup(t){return Object(s.b)(this,void 0,void 0,function*(){const e=yield this.loadingCtrl.create({message:"Creating account",spinner:"crescent"});yield e.present(),yield this.auth.createUserWithEmailAndPassword(t.email,t.pwd).then(t=>Object(s.b)(this,void 0,void 0,function*(){if(t){e.dismiss(),this.showAlertNav("Your account was successfully created, please use the credentials to login");const n={email:t.user.email,dateCreate:(new Date).toLocaleString(),driver:!1};return yield this.userCollection.doc(t.user.uid).set(n).then(t=>Object(s.b)(this,void 0,void 0,function*(){e.dismiss(),this.navCtrl.navigateRoot(["/login"])})).catch(t=>{})}})).catch(t=>{e.dismiss(),this.showAlert(t.message)})})}createShop(t,e){return Object(s.b)(this,void 0,void 0,function*(){return this.auth.createUserWithEmailAndPassword(t,e)})}signout(){return Object(s.b)(this,void 0,void 0,function*(){this.auth.signOut().then(t=>Object(s.b)(this,void 0,void 0,function*(){yield l.remove({key:"user"}).then(()=>{this.navCtrl.navigateRoot(["/login"])})}))})}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(o.g),r.Ub(c.a),r.Ub(a.x),r.Ub(a.b),r.Ub(u.a),r.Ub(a.y))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},pX2f:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var s=n("2atR"),i=n("iWo5"),r=n("qULd");const o=(t,e)=>{let n,o;const c=(t,s,i)=>{if("undefined"==typeof document)return;const r=document.elementFromPoint(t,s);r&&e(r)?r!==n&&(u(),a(r,i)):u()},a=(t,e)=>{n=t,o||(o=n);const i=n;Object(s.f)(()=>i.classList.add("ion-activated")),e()},u=(t=!1)=>{if(!n)return;const e=n;Object(s.f)(()=>e.classList.remove("ion-activated")),t&&o!==n&&n.click(),n=void 0};return Object(i.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>c(t.currentX,t.currentY,r.a),onMove:t=>c(t.currentX,t.currentY,r.b),onEnd:()=>{u(!0),Object(r.e)(),o=void 0}})}},qULd:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return c});const s={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:n})},notification(t){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:n})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},i=()=>{s.selection()},r=()=>{s.selectionStart()},o=()=>{s.selectionChanged()},c=()=>{s.selectionEnd()},a=t=>{s.impact(t)}}}]);