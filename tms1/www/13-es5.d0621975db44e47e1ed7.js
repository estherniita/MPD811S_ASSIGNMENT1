!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{tSDm:function(n,r,i){"use strict";i.r(r),i.d(r,"AddrequestPageModule",function(){return y});var o=i("ofXK"),s=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),u=i("mrSG"),d=(i("WI49"),i("gcOT")),l=i("fXoL"),b=i("c/rV");function g(e,t){1&e&&(l.Qb(0,"div",16),l.pc(1," Destination is required "),l.Pb())}function f(e,t){1&e&&(l.Qb(0,"h2",11),l.pc(1,"Choose driver"),l.Pb())}function p(e,t){if(1&e){var n=l.Rb();l.Qb(0,"div"),l.Qb(1,"ion-card",17),l.Yb("click",function(){l.ic(n);var e=t.index;return l.cc().selectDriver(e)}),l.Qb(2,"ion-avatar"),l.Ob(3,"img",18),l.Pb(),l.Qb(4,"div",19),l.Qb(5,"ion-label"),l.pc(6),l.Pb(),l.Qb(7,"ion-label"),l.pc(8),l.Ob(9,"ion-icon",20),l.Pb(),l.Qb(10,"ion-label"),l.pc(11),l.Pb(),l.Pb(),l.Pb(),l.Pb()}if(2&e){var r=t.$implicit;l.Db(1),l.fc("ngClass",r.clicked?"selected":""),l.Db(5),l.rc("Name: ",r.name,""),l.Db(2),l.rc("Rate: ",r.rate," "),l.Db(3),l.rc("Address: ",r.address,"")}}var m,h,v,x=function(){return["/login"]},P=d.b,k=P.Network,O=P.Storage,C=[{path:"",component:(m=function(){function n(t,r,i,o,a,c,u){e(this,n),this.alertCtrl=t,this.toastCtrl=r,this.formBuilder=i,this.platform=o,this.router=a,this.mainService=c,this.loadingCtrl=u,this.customAlertOptions={header:"Select",translucent:!0},this.drivers=[],this.requestForm=this.formBuilder.group({destination:new s.c("",s.n.required)})}var r,i,o;return r=n,(i=[{key:"ngOnInit",value:function(){}},{key:"f",get:function(){return this.requestForm.controls}},{key:"ionViewWillEnter",value:function(){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.drivers=[],this.getDrivers(),O.get({key:"user"}).then(function(e){t.user=JSON.parse(e.value)});case 1:case"end":return e.stop()}},e,this)}))}},{key:"showToast",value:function(e){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastCtrl.create({message:e,duration:3e3});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))}},{key:"userType",value:function(e){"shop"===e.detail.value?(this.user=!1,this.shop=!0):"user"===e.detail.value&&(this.shop=!1,this.user=!0)}},{key:"getDrivers",value:function(){var e=this;this.mainService.getUsers().subscribe(function(t){t&&t.length>0&&(e.drivers=[],t.forEach(function(t){t.driver&&e.drivers.push({years:t.years,address:t.address,name:t.name,rate:t.rate,id:t.id,clicked:!1})}))},function(){return Object(u.b)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastCtrl.create({message:"No internet connection. Make sure you are connected to the internet to proceed.",duration:3e3});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))})}},{key:"selectDriver",value:function(e){var t=this;this.seletect=!0,this.driverData=this.drivers[e],this.drivers[e].clicked=!0,this.drivers.forEach(function(e,n){e.id!==t.driverData.id&&(e.clicked=!1)})}},{key:"post",value:function(){return Object(u.b)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r,i,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getStatus();case 2:if(!e.sent.connected){e.next=22;break}return this.submitted=!0,e.next=6,this.loadingCtrl.create({message:"Processing",spinner:"circles"});case 6:if(t=e.sent,!this.requestForm.valid){e.next=20;break}if(!this.driverData){e.next=15;break}return e.next=11,t.present();case 11:n={destination:this.requestForm.value.destination,attented:!1,date:(new Date).toLocaleString("en-GB"),uid:this.user.uid,driver:this.driverData.id,driverName:this.driverData.name},this.mainService.addRequest(n).then(function(){return Object(u.b)(o,void 0,void 0,regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dismiss(),e.next=3,this.alertCtrl.create({header:"Success Request",message:"Request with desctination to ".concat(n.destination," was sent to driver ").concat(n.driverName," with success"),buttons:["Okay"]});case 3:return r=e.sent,e.next=6,r.present();case 6:this.router.navigate(["/requests"]);case 7:case"end":return e.stop()}},e,this)}))}).catch(function(){return Object(u.b)(o,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastCtrl.create({message:"Something went wrong. Please try again alter",duration:3e3});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}),e.next=20;break;case 15:return e.next=17,this.alertCtrl.create({header:"Information",message:"Kindly, select the driver on the list, in order to proceed, by clcking on the on of the list items on the page.",buttons:["Okay"]});case 17:return r=e.sent,e.next=20,r.present();case 20:e.next=27;break;case 22:return e.next=24,this.toastCtrl.create({message:"No internet connection. Make sure you are connected to the internet to proceed.",duration:3e3});case 24:return i=e.sent,e.next=27,i.present();case 27:case"end":return e.stop()}},e,this)}))}}])&&t(r.prototype,i),o&&t(r,o),n}(),m.\u0275fac=function(e){return new(e||m)(l.Nb(a.b),l.Nb(a.C),l.Nb(s.b),l.Nb(a.z),l.Nb(c.g),l.Nb(b.a),l.Nb(a.x))},m.\u0275cmp=l.Hb({type:m,selectors:[["app-addrequest"]],decls:23,vars:6,consts:[["slot","start"],["defaultHref","/home","color","pinkish"],["fullscreen","true","scroll-y","true",1,"signup","no-scroll","ion-padding"],[1,"ion-padding",3,"formGroup"],[1,"outter"],["required","","formControlName","destination","placeholder","Enter destination","type","text","required",""],["class","invalid-feedback",4,"ngIf"],[1,"driver"],["class","ion-text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"buttons"],[1,"ion-text-center"],["color","buttonblue",1,"login",3,"routerLink"],["slot","start","name","arrow-redo-outline"],["color","buttonblue",1,"signup",3,"click"],["slot","start","name","add"],[1,"invalid-feedback"],[3,"ngClass","click"],["src","../../../assets/imgs/driver1.jpg"],[1,"content"],["slot","","name","star"]],template:function(e,t){1&e&&(l.Qb(0,"ion-header"),l.Qb(1,"ion-toolbar"),l.Qb(2,"ion-buttons",0),l.Ob(3,"ion-back-button",1),l.Pb(),l.Qb(4,"ion-title"),l.pc(5,"Post Request"),l.Pb(),l.Pb(),l.Pb(),l.Qb(6,"ion-content",2),l.Qb(7,"form",3),l.Qb(8,"div",4),l.Ob(9,"ion-input",5),l.Pb(),l.oc(10,g,2,0,"div",6),l.Pb(),l.Qb(11,"section",7),l.oc(12,f,2,0,"h2",8),l.oc(13,p,12,4,"div",9),l.Pb(),l.Qb(14,"div",10),l.Qb(15,"div",11),l.Qb(16,"ion-button",12),l.Ob(17,"ion-icon",13),l.pc(18," Cancel "),l.Pb(),l.Pb(),l.Qb(19,"div",11),l.Qb(20,"ion-button",14),l.Yb("click",function(){return t.post()}),l.Ob(21,"ion-icon",15),l.pc(22," Post "),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e&&(l.Db(7),l.fc("formGroup",t.requestForm),l.Db(3),l.fc("ngIf",t.requestForm.hasError("required","destination")&&t.submitted),l.Db(2),l.fc("ngIf",0!==t.drivers.length),l.Db(1),l.fc("ngForOf",t.drivers),l.Db(3),l.fc("routerLink",l.gc(5,x)))},directives:[a.m,a.u,a.h,a.e,a.f,a.t,a.j,s.o,s.k,s.f,a.o,a.B,s.m,s.j,s.d,o.k,o.j,a.g,a.A,c.h,a.n,a.i,o.i,a.d,a.q],styles:["ion-content[_ngcontent-%COMP%]{--padding-top:5%;--background:#f5f2f3!important}ion-toolbar[_ngcontent-%COMP%]{--background:#fff5f8!important;--color:#000!important}h2[_ngcontent-%COMP%]{color:#000;margin-top:-.5rem}.outter[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;border:2px solid #1f5030;background:none;height:50px;margin:10px 0;color:#000;padding:5px;border-radius:8px}.terms[_ngcontent-%COMP%]{margin-right:20px;font-weight:700;color:#1d1e83}.invalid-feedback[_ngcontent-%COMP%]{position:relative;color:red;padding-top:0;margin-top:-.5rem}.buttons[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 5%}.buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color:#fff!important;text-transform:capitalize;border-radius:6px;background:#097a4b!important;width:10rem}.buttons[_ngcontent-%COMP%]   .signup[_ngcontent-%COMP%]{border:1px solid #4e54ea}.logoimg[_ngcontent-%COMP%]{margin-top:-20px;display:flex;flex-direction:column;justify-content:center;align-items:center}.logoimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:auto;height:100px;border-radius:14%}.logoimg[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background:#f5f2f3;--color:#4e54ea;text-transform:capitalize}.logoimg[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{--color:#4e54ea}.selected[_ngcontent-%COMP%]{--background:#e092a5}.custom-skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{line-height:13px}.custom-skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:last-child{margin-bottom:5px}ion-card[_ngcontent-%COMP%]{--background:transparent;--color:#000;border-radius:3rem;display:flex}ion-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem}@media only screen and (max-width:376px){ion-content[_ngcontent-%COMP%]{--padding-top:5%}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 5%}.buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color:#fff!important;text-transform:capitalize;border-radius:6px;background:#4e54ea!important;width:8rem}.buttons[_ngcontent-%COMP%]   .signup[_ngcontent-%COMP%]{border:1px solid #4e54ea}}"]}),m)}],w=((v=function t(){e(this,t)}).\u0275fac=function(e){return new(e||v)},v.\u0275mod=l.Lb({type:v}),v.\u0275inj=l.Kb({imports:[[c.i.forChild(C)],c.i]}),v),y=((h=function t(){e(this,t)}).\u0275fac=function(e){return new(e||h)},h.\u0275mod=l.Lb({type:h}),h.\u0275inj=l.Kb({imports:[[o.c,s.l,a.v,w]]}),h)}}])}();