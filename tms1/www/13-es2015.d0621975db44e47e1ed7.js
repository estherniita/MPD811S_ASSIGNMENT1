(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{tSDm:function(t,e,n){"use strict";n.r(e),n.d(e,"AddrequestPageModule",function(){return P});var i=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),s=n("tyNb"),c=n("mrSG"),a=(n("WI49"),n("gcOT")),d=n("fXoL"),l=n("c/rV");function u(t,e){1&t&&(d.Qb(0,"div",16),d.pc(1," Destination is required "),d.Pb())}function b(t,e){1&t&&(d.Qb(0,"h2",11),d.pc(1,"Choose driver"),d.Pb())}function g(t,e){if(1&t){const t=d.Rb();d.Qb(0,"div"),d.Qb(1,"ion-card",17),d.Yb("click",function(){d.ic(t);const n=e.index;return d.cc().selectDriver(n)}),d.Qb(2,"ion-avatar"),d.Ob(3,"img",18),d.Pb(),d.Qb(4,"div",19),d.Qb(5,"ion-label"),d.pc(6),d.Pb(),d.Qb(7,"ion-label"),d.pc(8),d.Ob(9,"ion-icon",20),d.Pb(),d.Qb(10,"ion-label"),d.pc(11),d.Pb(),d.Pb(),d.Pb(),d.Pb()}if(2&t){const t=e.$implicit;d.Db(1),d.fc("ngClass",t.clicked?"selected":""),d.Db(5),d.rc("Name: ",t.name,""),d.Db(2),d.rc("Rate: ",t.rate," "),d.Db(3),d.rc("Address: ",t.address,"")}}const p=function(){return["/login"]},{Network:h,Storage:f}=a.b,m=[{path:"",component:(()=>{class t{constructor(t,e,n,i,r,s,c){this.alertCtrl=t,this.toastCtrl=e,this.formBuilder=n,this.platform=i,this.router=r,this.mainService=s,this.loadingCtrl=c,this.customAlertOptions={header:"Select",translucent:!0},this.drivers=[],this.requestForm=this.formBuilder.group({destination:new o.c("",o.n.required)})}ngOnInit(){}get f(){return this.requestForm.controls}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){this.drivers=[],this.getDrivers(),f.get({key:"user"}).then(t=>{this.user=JSON.parse(t.value)})})}showToast(t){return Object(c.b)(this,void 0,void 0,function*(){let e=yield this.toastCtrl.create({message:t,duration:3e3});yield e.present()})}userType(t){"shop"===t.detail.value?(this.user=!1,this.shop=!0):"user"===t.detail.value&&(this.shop=!1,this.user=!0)}getDrivers(){this.mainService.getUsers().subscribe(t=>{t&&t.length>0&&(this.drivers=[],t.forEach(t=>{t.driver&&this.drivers.push({years:t.years,address:t.address,name:t.name,rate:t.rate,id:t.id,clicked:!1})}))},()=>Object(c.b)(this,void 0,void 0,function*(){const t=yield this.toastCtrl.create({message:"No internet connection. Make sure you are connected to the internet to proceed.",duration:3e3});yield t.present()}))}selectDriver(t){this.seletect=!0,this.driverData=this.drivers[t],this.drivers[t].clicked=!0,this.drivers.forEach((t,e)=>{t.id!==this.driverData.id&&(t.clicked=!1)})}post(){return Object(c.b)(this,void 0,void 0,function*(){if((yield h.getStatus()).connected){this.submitted=!0;const t=yield this.loadingCtrl.create({message:"Processing",spinner:"circles"});if(this.requestForm.valid)if(this.driverData){yield t.present();const e={destination:this.requestForm.value.destination,attented:!1,date:(new Date).toLocaleString("en-GB"),uid:this.user.uid,driver:this.driverData.id,driverName:this.driverData.name};this.mainService.addRequest(e).then(()=>Object(c.b)(this,void 0,void 0,function*(){t.dismiss();const n=yield this.alertCtrl.create({header:"Success Request",message:`Request with desctination to ${e.destination} was sent to driver ${e.driverName} with success`,buttons:["Okay"]});yield n.present(),this.router.navigate(["/requests"])})).catch(()=>Object(c.b)(this,void 0,void 0,function*(){const t=yield this.toastCtrl.create({message:"Something went wrong. Please try again alter",duration:3e3});yield t.present()}))}else{const t=yield this.alertCtrl.create({header:"Information",message:"Kindly, select the driver on the list, in order to proceed, by clcking on the on of the list items on the page.",buttons:["Okay"]});yield t.present()}}else{const t=yield this.toastCtrl.create({message:"No internet connection. Make sure you are connected to the internet to proceed.",duration:3e3});yield t.present()}})}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(r.b),d.Nb(r.C),d.Nb(o.b),d.Nb(r.z),d.Nb(s.g),d.Nb(l.a),d.Nb(r.x))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-addrequest"]],decls:23,vars:6,consts:[["slot","start"],["defaultHref","/home","color","pinkish"],["fullscreen","true","scroll-y","true",1,"signup","no-scroll","ion-padding"],[1,"ion-padding",3,"formGroup"],[1,"outter"],["required","","formControlName","destination","placeholder","Enter destination","type","text","required",""],["class","invalid-feedback",4,"ngIf"],[1,"driver"],["class","ion-text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"buttons"],[1,"ion-text-center"],["color","buttonblue",1,"login",3,"routerLink"],["slot","start","name","arrow-redo-outline"],["color","buttonblue",1,"signup",3,"click"],["slot","start","name","add"],[1,"invalid-feedback"],[3,"ngClass","click"],["src","../../../assets/imgs/driver1.jpg"],[1,"content"],["slot","","name","star"]],template:function(t,e){1&t&&(d.Qb(0,"ion-header"),d.Qb(1,"ion-toolbar"),d.Qb(2,"ion-buttons",0),d.Ob(3,"ion-back-button",1),d.Pb(),d.Qb(4,"ion-title"),d.pc(5,"Post Request"),d.Pb(),d.Pb(),d.Pb(),d.Qb(6,"ion-content",2),d.Qb(7,"form",3),d.Qb(8,"div",4),d.Ob(9,"ion-input",5),d.Pb(),d.oc(10,u,2,0,"div",6),d.Pb(),d.Qb(11,"section",7),d.oc(12,b,2,0,"h2",8),d.oc(13,g,12,4,"div",9),d.Pb(),d.Qb(14,"div",10),d.Qb(15,"div",11),d.Qb(16,"ion-button",12),d.Ob(17,"ion-icon",13),d.pc(18," Cancel "),d.Pb(),d.Pb(),d.Qb(19,"div",11),d.Qb(20,"ion-button",14),d.Yb("click",function(){return e.post()}),d.Ob(21,"ion-icon",15),d.pc(22," Post "),d.Pb(),d.Pb(),d.Pb(),d.Pb()),2&t&&(d.Db(7),d.fc("formGroup",e.requestForm),d.Db(3),d.fc("ngIf",e.requestForm.hasError("required","destination")&&e.submitted),d.Db(2),d.fc("ngIf",0!==e.drivers.length),d.Db(1),d.fc("ngForOf",e.drivers),d.Db(3),d.fc("routerLink",d.gc(5,p)))},directives:[r.m,r.u,r.h,r.e,r.f,r.t,r.j,o.o,o.k,o.f,r.o,r.B,o.m,o.j,o.d,i.k,i.j,r.g,r.A,s.h,r.n,r.i,i.i,r.d,r.q],styles:["ion-content[_ngcontent-%COMP%]{--padding-top:5%;--background:#f5f2f3!important}ion-toolbar[_ngcontent-%COMP%]{--background:#fff5f8!important;--color:#000!important}h2[_ngcontent-%COMP%]{color:#000;margin-top:-.5rem}.outter[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:flex-start;border:2px solid #1f5030;background:none;height:50px;margin:10px 0;color:#000;padding:5px;border-radius:8px}.terms[_ngcontent-%COMP%]{margin-right:20px;font-weight:700;color:#1d1e83}.invalid-feedback[_ngcontent-%COMP%]{position:relative;color:red;padding-top:0;margin-top:-.5rem}.buttons[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 5%}.buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color:#fff!important;text-transform:capitalize;border-radius:6px;background:#097a4b!important;width:10rem}.buttons[_ngcontent-%COMP%]   .signup[_ngcontent-%COMP%]{border:1px solid #4e54ea}.logoimg[_ngcontent-%COMP%]{margin-top:-20px;display:flex;flex-direction:column;justify-content:center;align-items:center}.logoimg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;margin:auto;height:100px;border-radius:14%}.logoimg[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background:#f5f2f3;--color:#4e54ea;text-transform:capitalize}.logoimg[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{--color:#4e54ea}.selected[_ngcontent-%COMP%]{--background:#e092a5}.custom-skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{line-height:13px}.custom-skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:last-child{margin-bottom:5px}ion-card[_ngcontent-%COMP%]{--background:transparent;--color:#000;border-radius:3rem;display:flex}ion-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem}@media only screen and (max-width:376px){ion-content[_ngcontent-%COMP%]{--padding-top:5%}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 5%}.buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color:#fff!important;text-transform:capitalize;border-radius:6px;background:#4e54ea!important;width:8rem}.buttons[_ngcontent-%COMP%]   .signup[_ngcontent-%COMP%]{border:1px solid #4e54ea}}"]}),t})()}];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({imports:[[s.i.forChild(m)],s.i]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({imports:[[i.c,o.l,r.v,v]]}),t})()}}]);